<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head>
<body><pre><a name="1">/* stdlib.h library for large systems - small embedded systems use clibrary.c instead */</a>
<a name="2">#include "../interpreter.h"</a>
<a name="3"></a>
<a name="4">#ifndef BUILTIN_MINI_STDLIB</a>
<a name="5"></a>
<a name="6">static int <a href="stdlib_c.html#6">Stdlib_ZeroValue</a> = 0;</a>
<a name="7"></a>
<a name="8">#ifndef NO_FP</a>
<a name="9">void <a href="stdlib_c.html#9">StdlibAtof</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="10">{</a>
<a name="11">    <a href="stdlib_c.html#9">ReturnValue</a>-&gtVal-&gtFP = atof(<a href="stdlib_c.html#9">Param</a>[0]-&gtVal-&gtPointer);</a>
<a name="12">}</a>
<a name="13">#endif</a>
<a name="14"></a>
<a name="15">void <a href="stdlib_c.html#15">StdlibAtoi</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="16">{</a>
<a name="17">    <a href="stdlib_c.html#15">ReturnValue</a>-&gtVal-&gtInteger = atoi(<a href="stdlib_c.html#15">Param</a>[0]-&gtVal-&gtPointer);</a>
<a name="18">}</a>
<a name="19"></a>
<a name="20">void <a href="stdlib_c.html#20">StdlibAtol</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="21">{</a>
<a name="22">    <a href="stdlib_c.html#20">ReturnValue</a>-&gtVal-&gtInteger = atol(<a href="stdlib_c.html#20">Param</a>[0]-&gtVal-&gtPointer);</a>
<a name="23">}</a>
<a name="24"></a>
<a name="25">#ifndef NO_FP</a>
<a name="26">void <a href="stdlib_c.html#26">StdlibStrtod</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="27">{</a>
<a name="28">    <a href="stdlib_c.html#26">ReturnValue</a>-&gtVal-&gtFP = strtod(<a href="stdlib_c.html#26">Param</a>[0]-&gtVal-&gtPointer, <a href="stdlib_c.html#26">Param</a>[1]-&gtVal-&gtPointer);</a>
<a name="29">}</a>
<a name="30">#endif</a>
<a name="31"></a>
<a name="32">void <a href="stdlib_c.html#32">StdlibStrtol</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="33">{</a>
<a name="34">    <a href="stdlib_c.html#32">ReturnValue</a>-&gtVal-&gtInteger = strtol(<a href="stdlib_c.html#32">Param</a>[0]-&gtVal-&gtPointer, <a href="stdlib_c.html#32">Param</a>[1]-&gtVal-&gtPointer, <a href="stdlib_c.html#32">Param</a>[2]-&gtVal-&gtInteger);</a>
<a name="35">}</a>
<a name="36"></a>
<a name="37">void <a href="stdlib_c.html#37">StdlibStrtoul</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="38">{</a>
<a name="39">    <a href="stdlib_c.html#37">ReturnValue</a>-&gtVal-&gtInteger = strtoul(<a href="stdlib_c.html#37">Param</a>[0]-&gtVal-&gtPointer, <a href="stdlib_c.html#37">Param</a>[1]-&gtVal-&gtPointer, <a href="stdlib_c.html#37">Param</a>[2]-&gtVal-&gtInteger);</a>
<a name="40">}</a>
<a name="41"></a>
<a name="42">void <a href="stdlib_c.html#42">StdlibMalloc</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="43">{</a>
<a name="44">    <a href="stdlib_c.html#42">ReturnValue</a>-&gtVal-&gtPointer = malloc(<a href="stdlib_c.html#42">Param</a>[0]-&gtVal-&gtInteger);</a>
<a name="45">}</a>
<a name="46"></a>
<a name="47">void <a href="stdlib_c.html#47">StdlibCalloc</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="48">{</a>
<a name="49">    <a href="stdlib_c.html#47">ReturnValue</a>-&gtVal-&gtPointer = calloc(<a href="stdlib_c.html#47">Param</a>[0]-&gtVal-&gtInteger, <a href="stdlib_c.html#47">Param</a>[1]-&gtVal-&gtInteger);</a>
<a name="50">}</a>
<a name="51"></a>
<a name="52">void <a href="stdlib_c.html#52">StdlibRealloc</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="53">{</a>
<a name="54">    <a href="stdlib_c.html#52">ReturnValue</a>-&gtVal-&gtPointer = realloc(<a href="stdlib_c.html#52">Param</a>[0]-&gtVal-&gtPointer, <a href="stdlib_c.html#52">Param</a>[1]-&gtVal-&gtInteger);</a>
<a name="55">}</a>
<a name="56"></a>
<a name="57">void <a href="stdlib_c.html#57">StdlibFree</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="58">{</a>
<a name="59">    free(<a href="stdlib_c.html#57">Param</a>[0]-&gtVal-&gtPointer);</a>
<a name="60">}</a>
<a name="61"></a>
<a name="62">void <a href="stdlib_c.html#62">StdlibRand</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="63">{</a>
<a name="64">    <a href="stdlib_c.html#62">ReturnValue</a>-&gtVal-&gtInteger = rand();</a>
<a name="65">}</a>
<a name="66"></a>
<a name="67">void <a href="stdlib_c.html#67">StdlibSrand</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="68">{</a>
<a name="69">    srand(<a href="stdlib_c.html#67">Param</a>[0]-&gtVal-&gtInteger);</a>
<a name="70">}</a>
<a name="71"></a>
<a name="72">void <a href="stdlib_c.html#72">StdlibAbort</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="73">{</a>
<a name="74">    <a href="platform_c.html#134">ProgramFail</a>(<a href="stdlib_c.html#72">Parser</a>, "abort");</a>
<a name="75">}</a>
<a name="76"></a>
<a name="77">void <a href="stdlib_c.html#77">StdlibExit</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="78">{</a>
<a name="79">    <a href="platform_unix_c.html#135">PlatformExit</a>(<a href="stdlib_c.html#77">Parser</a>-&gtpc, <a href="stdlib_c.html#77">Param</a>[0]-&gtVal-&gtInteger);</a>
<a name="80">}</a>
<a name="81"></a>
<a name="82">void <a href="stdlib_c.html#82">StdlibGetenv</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="83">{</a>
<a name="84">    <a href="stdlib_c.html#82">ReturnValue</a>-&gtVal-&gtPointer = getenv(<a href="stdlib_c.html#82">Param</a>[0]-&gtVal-&gtPointer);</a>
<a name="85">}</a>
<a name="86"></a>
<a name="87">void <a href="stdlib_c.html#87">StdlibSystem</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="88">{</a>
<a name="89">    <a href="stdlib_c.html#87">ReturnValue</a>-&gtVal-&gtInteger = system(<a href="stdlib_c.html#87">Param</a>[0]-&gtVal-&gtPointer);</a>
<a name="90">}</a>
<a name="91"></a>
<a name="92">#if 0</a>
<a name="93">void StdlibBsearch(struct ParseState *Parser, struct Value *ReturnValue, struct Value **Param, int NumArgs)</a>
<a name="94">{</a>
<a name="95">    ReturnValue-&gtVal-&gtPointer = bsearch(Param[0]-&gtVal-&gtPointer, Param[1]-&gtVal-&gtPointer, Param[2]-&gtVal-&gtInteger, Param[3]-&gtVal-&gtInteger, (int (*)())Param[4]-&gtVal-&gtPointer);</a>
<a name="96">}</a>
<a name="97">#endif</a>
<a name="98"></a>
<a name="99">void <a href="stdlib_c.html#99">StdlibAbs</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="100">{</a>
<a name="101">    <a href="stdlib_c.html#99">ReturnValue</a>-&gtVal-&gtInteger = abs(<a href="stdlib_c.html#99">Param</a>[0]-&gtVal-&gtInteger);</a>
<a name="102">}</a>
<a name="103"></a>
<a name="104">void <a href="stdlib_c.html#104">StdlibLabs</a>(struct ParseState *<a name="searched">Parser</a>, struct Value *<a name="searched">ReturnValue</a>, struct Value **<a name="searched">Param</a>, int <a name="searched">NumArgs</a>)</a>
<a name="105">{</a>
<a name="106">    <a href="stdlib_c.html#104">ReturnValue</a>-&gtVal-&gtInteger = labs(<a href="stdlib_c.html#104">Param</a>[0]-&gtVal-&gtInteger);</a>
<a name="107">}</a>
<a name="108"></a>
<a name="109">#if 0</a>
<a name="110">void StdlibDiv(struct ParseState *Parser, struct Value *ReturnValue, struct Value **Param, int NumArgs)</a>
<a name="111">{</a>
<a name="112">    ReturnValue-&gtVal-&gtInteger = div(Param[0]-&gtVal-&gtInteger, Param[1]-&gtVal-&gtInteger);</a>
<a name="113">}</a>
<a name="114"></a>
<a name="115">void StdlibLdiv(struct ParseState *Parser, struct Value *ReturnValue, struct Value **Param, int NumArgs)</a>
<a name="116">{</a>
<a name="117">    ReturnValue-&gtVal-&gtInteger = ldiv(Param[0]-&gtVal-&gtInteger, Param[1]-&gtVal-&gtInteger);</a>
<a name="118">}</a>
<a name="119">#endif</a>
<a name="120"></a>
<a name="121">#if 0</a>
<a name="122">/* handy structure definitions */</a>
<a name="123">const char StdlibDefs[] = "\</a>
<a name="124">typedef struct { \</a>
<a name="125">    int quot, rem; \</a>
<a name="126">} div_t; \</a>
<a name="127">\</a>
<a name="128">typedef struct { \</a>
<a name="129">    int quot, rem; \</a>
<a name="130">} ldiv_t; \</a>
<a name="131">";</a>
<a name="132">#endif</a>
<a name="133"></a>
<a name="134">/* all stdlib.h functions */</a>
<a name="135">struct LibraryFunction <a href="interpreter_h.html#632">StdlibFunctions</a>[] =</a>
<a name="136">{</a>
<a name="137">#ifndef NO_FP</a>
<a name="138">    { <a href="stdlib_c.html#9">StdlibAtof</a>,           "float atof(char *);" },</a>
<a name="139">    { <a href="stdlib_c.html#26">StdlibStrtod</a>,         "float strtod(char *,char **);" },</a>
<a name="140">#endif</a>
<a name="141">    { <a href="stdlib_c.html#15">StdlibAtoi</a>,           "int atoi(char *);" },</a>
<a name="142">    { <a href="stdlib_c.html#20">StdlibAtol</a>,           "int atol(char *);" },</a>
<a name="143">    { <a href="stdlib_c.html#32">StdlibStrtol</a>,         "int strtol(char *,char **,int);" },</a>
<a name="144">    { <a href="stdlib_c.html#37">StdlibStrtoul</a>,        "int strtoul(char *,char **,int);" },</a>
<a name="145">    { <a href="stdlib_c.html#42">StdlibMalloc</a>,         "void *malloc(int);" },</a>
<a name="146">    { <a href="stdlib_c.html#47">StdlibCalloc</a>,         "void *calloc(int,int);" },</a>
<a name="147">    { <a href="stdlib_c.html#52">StdlibRealloc</a>,        "void *realloc(void *,int);" },</a>
<a name="148">    { <a href="stdlib_c.html#57">StdlibFree</a>,           "void free(void *);" },</a>
<a name="149">    { <a href="stdlib_c.html#62">StdlibRand</a>,           "int rand();" },</a>
<a name="150">    { <a href="stdlib_c.html#67">StdlibSrand</a>,          "void srand(int);" },</a>
<a name="151">    { <a href="stdlib_c.html#72">StdlibAbort</a>,          "void abort();" },</a>
<a name="152">    { <a href="stdlib_c.html#77">StdlibExit</a>,           "void exit(int);" },</a>
<a name="153">    { <a href="stdlib_c.html#82">StdlibGetenv</a>,         "char *getenv(char *);" },</a>
<a name="154">    { <a href="stdlib_c.html#87">StdlibSystem</a>,         "int system(char *);" },</a>
<a name="155">/*    { StdlibBsearch,        "void *bsearch(void *,void *,int,int,int (*)());" }, */</a>
<a name="156">/*    { StdlibQsort,          "void *qsort(void *,int,int,int (*)());" }, */</a>
<a name="157">    { <a href="stdlib_c.html#99">StdlibAbs</a>,            "int abs(int);" },</a>
<a name="158">    { <a href="stdlib_c.html#104">StdlibLabs</a>,           "int labs(int);" },</a>
<a name="159">#if 0</a>
<a name="160">    { StdlibDiv,            "div_t div(int);" },</a>
<a name="161">    { StdlibLdiv,           "ldiv_t ldiv(int);" },</a>
<a name="162">#endif</a>
<a name="163">    { NULL,                 NULL }</a>
<a name="164">};</a>
<a name="165"></a>
<a name="166">/* creates various system-dependent definitions */</a>
<a name="167">void <a href="stdlib_c.html#167">StdlibSetupFunc</a>(Picoc *<a name="searched">pc</a>)</a>
<a name="168">{</a>
<a name="169">    /* define NULL, TRUE and FALSE */</a>
<a name="170">    if (!<a href="variable_c.html#346">VariableDefined</a>(<a href="stdlib_c.html#167">pc</a>, <a href="table_c.html#166">TableStrRegister</a>(<a href="stdlib_c.html#167">pc</a>, "NULL")))</a>
<a name="171">        <a href="variable_c.html#375">VariableDefinePlatformVar</a>(<a href="stdlib_c.html#167">pc</a>, NULL, "NULL", &<a href="stdlib_c.html#167">pc</a>-&gtIntType, (union AnyValue *)&<a href="stdlib_c.html#6">Stdlib_ZeroValue</a>, FALSE);</a>
<a name="172">}</a>
<a name="173"></a>
<a name="174">#endif /* !BUILTIN_MINI_STDLIB */</a>
</pre></body></html>