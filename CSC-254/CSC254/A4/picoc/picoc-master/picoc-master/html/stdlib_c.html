<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head>
<body><pre><a name="1"><font color="gray">/*<searched> stdlib.h library for large systems - small embedded systems use clibrary.c instead */</font></a>
<a name="2">#include "../interpreter.h"</a>
<a name="3"></a>
<a name="4">#ifndef BUILTIN_MINI_STDLIB</a>
<a name="5"></a>
<a name="6">static <font color="red">int</font> <a href="stdlib_c.html#6">Stdlib_ZeroValue</a> = 0;</a>
<a name="7"></a>
<a name="8">#ifndef NO_FP</a>
<a name="9"><font color="red">void</font> <a href="stdlib_c.html#9">StdlibAtof</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="10">{</a>
<a name="11">    <a href="stdlib_c.html#9">ReturnValue</a>-&gtVal-&gtFP = atof(Param[0]-&gtVal-&gtPointer);</a>
<a name="12">}</a>
<a name="13">#endif</a>
<a name="14"></a>
<a name="15"><font color="red">void</font> <a href="stdlib_c.html#15">StdlibAtoi</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="16">{</a>
<a name="17">    <a href="stdlib_c.html#15">ReturnValue</a>-&gtVal-&gtInteger = atoi(Param[0]-&gtVal-&gtPointer);</a>
<a name="18">}</a>
<a name="19"></a>
<a name="20"><font color="red">void</font> <a href="stdlib_c.html#20">StdlibAtol</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="21">{</a>
<a name="22">    <a href="stdlib_c.html#20">ReturnValue</a>-&gtVal-&gtInteger = atol(Param[0]-&gtVal-&gtPointer);</a>
<a name="23">}</a>
<a name="24"></a>
<a name="25">#ifndef NO_FP</a>
<a name="26"><font color="red">void</font> <a href="stdlib_c.html#26">StdlibStrtod</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="27">{</a>
<a name="28">    <a href="stdlib_c.html#26">ReturnValue</a>-&gtVal-&gtFP = strtod(Param[0]-&gtVal-&gtPointer, <a href="stdlib_c.html#26">Param</a>[1]-&gtVal-&gtPointer);</a>
<a name="29">}</a>
<a name="30">#endif</a>
<a name="31"></a>
<a name="32"><font color="red">void</font> <a href="stdlib_c.html#32">StdlibStrtol</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="33">{</a>
<a name="34">    <a href="stdlib_c.html#32">ReturnValue</a>-&gtVal-&gtInteger = strtol(Param[0]-&gtVal-&gtPointer, <a href="stdlib_c.html#32">Param</a>[1]-&gtVal-&gtPointer, <a href="stdlib_c.html#32">Param</a>[2]-&gtVal-&gtInteger);</a>
<a name="35">}</a>
<a name="36"></a>
<a name="37"><font color="red">void</font> <a href="stdlib_c.html#37">StdlibStrtoul</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="38">{</a>
<a name="39">    <a href="stdlib_c.html#37">ReturnValue</a>-&gtVal-&gtInteger = strtoul(Param[0]-&gtVal-&gtPointer, <a href="stdlib_c.html#37">Param</a>[1]-&gtVal-&gtPointer, <a href="stdlib_c.html#37">Param</a>[2]-&gtVal-&gtInteger);</a>
<a name="40">}</a>
<a name="41"></a>
<a name="42"><font color="red">void</font> <a href="stdlib_c.html#42">StdlibMalloc</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="43">{</a>
<a name="44">    <a href="stdlib_c.html#42">ReturnValue</a>-&gtVal-&gtPointer = malloc(Param[0]-&gtVal-&gtInteger);</a>
<a name="45">}</a>
<a name="46"></a>
<a name="47"><font color="red">void</font> <a href="stdlib_c.html#47">StdlibCalloc</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="48">{</a>
<a name="49">    <a href="stdlib_c.html#47">ReturnValue</a>-&gtVal-&gtPointer = calloc(Param[0]-&gtVal-&gtInteger, <a href="stdlib_c.html#47">Param</a>[1]-&gtVal-&gtInteger);</a>
<a name="50">}</a>
<a name="51"></a>
<a name="52"><font color="red">void</font> <a href="stdlib_c.html#52">StdlibRealloc</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="53">{</a>
<a name="54">    <a href="stdlib_c.html#52">ReturnValue</a>-&gtVal-&gtPointer = realloc(Param[0]-&gtVal-&gtPointer, <a href="stdlib_c.html#52">Param</a>[1]-&gtVal-&gtInteger);</a>
<a name="55">}</a>
<a name="56"></a>
<a name="57"><font color="red">void</font> <a href="stdlib_c.html#57">StdlibFree</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="58">{</a>
<a name="59">    free(Param[0]-&gtVal-&gtPointer);</a>
<a name="60">}</a>
<a name="61"></a>
<a name="62"><font color="red">void</font> <a href="stdlib_c.html#62">StdlibRand</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="63">{</a>
<a name="64">    <a href="stdlib_c.html#62">ReturnValue</a>-&gtVal-&gtInteger = rand();</a>
<a name="65">}</a>
<a name="66"></a>
<a name="67"><font color="red">void</font> <a href="stdlib_c.html#67">StdlibSrand</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="68">{</a>
<a name="69">    srand(Param[0]-&gtVal-&gtInteger);</a>
<a name="70">}</a>
<a name="71"></a>
<a name="72"><font color="red">void</font> <a href="stdlib_c.html#72">StdlibAbort</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="73">{</a>
<a name="74">    <a href="platform_c.html#134">ProgramFail</a>(Parser, "abort");</a>
<a name="75">}</a>
<a name="76"></a>
<a name="77"><font color="red">void</font> <a href="stdlib_c.html#77">StdlibExit</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="78">{</a>
<a name="79">    <a href="platform_unix_c.html#135">PlatformExit</a>(Parser-&gtpc, <a href="stdlib_c.html#77">Param</a>[0]-&gtVal-&gtInteger);</a>
<a name="80">}</a>
<a name="81"></a>
<a name="82"><font color="red">void</font> <a href="stdlib_c.html#82">StdlibGetenv</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="83">{</a>
<a name="84">    <a href="stdlib_c.html#82">ReturnValue</a>-&gtVal-&gtPointer = getenv(Param[0]-&gtVal-&gtPointer);</a>
<a name="85">}</a>
<a name="86"></a>
<a name="87"><font color="red">void</font> <a href="stdlib_c.html#87">StdlibSystem</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="88">{</a>
<a name="89">    <a href="stdlib_c.html#87">ReturnValue</a>-&gtVal-&gtInteger = system(Param[0]-&gtVal-&gtPointer);</a>
<a name="90">}</a>
<a name="91"></a>
<a name="92">#<font color="green">if</font> 0</a>
<a name="93"><font color="red">void</font> StdlibBsearch(<font color="brown">struct</font> ParseState *Parser, <font color="brown">struct</font> Value *ReturnValue, <font color="brown">struct</font> Value **Param, <font color="red">int</font> NumArgs)</a>
<a name="94">{</a>
<a name="95">    ReturnValue-&gtVal-&gtPointer = bsearch(Param[0]-&gtVal-&gtPointer, Param[1]-&gtVal-&gtPointer, Param[2]-&gtVal-&gtInteger, Param[3]-&gtVal-&gtInteger, (<font color="red">int</font> (*)())Param[4]-&gtVal-&gtPointer);</a>
<a name="96">}</a>
<a name="97">#endif</a>
<a name="98"></a>
<a name="99"><font color="red">void</font> <a href="stdlib_c.html#99">StdlibAbs</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="100">{</a>
<a name="101">    <a href="stdlib_c.html#99">ReturnValue</a>-&gtVal-&gtInteger = abs(Param[0]-&gtVal-&gtInteger);</a>
<a name="102">}</a>
<a name="103"></a>
<a name="104"><font color="red">void</font> <a href="stdlib_c.html#104">StdlibLabs</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="105">{</a>
<a name="106">    <a href="stdlib_c.html#104">ReturnValue</a>-&gtVal-&gtInteger = labs(Param[0]-&gtVal-&gtInteger);</a>
<a name="107">}</a>
<a name="108"></a>
<a name="109">#<font color="green">if</font> 0</a>
<a name="110"><font color="red">void</font> StdlibDiv(<font color="brown">struct</font> ParseState *Parser, <font color="brown">struct</font> Value *ReturnValue, <font color="brown">struct</font> Value **Param, <font color="red">int</font> NumArgs)</a>
<a name="111">{</a>
<a name="112">    ReturnValue-&gtVal-&gtInteger = div(Param[0]-&gtVal-&gtInteger, Param[1]-&gtVal-&gtInteger);</a>
<a name="113">}</a>
<a name="114"></a>
<a name="115"><font color="red">void</font> StdlibLdiv(<font color="brown">struct</font> ParseState *Parser, <font color="brown">struct</font> Value *ReturnValue, <font color="brown">struct</font> Value **Param, <font color="red">int</font> NumArgs)</a>
<a name="116">{</a>
<a name="117">    ReturnValue-&gtVal-&gtInteger = ldiv(Param[0]-&gtVal-&gtInteger, Param[1]-&gtVal-&gtInteger);</a>
<a name="118">}</a>
<a name="119">#endif</a>
<a name="120"></a>
<a name="121">#<font color="green">if</font> 0</a>
<a name="122"><font color="gray">/*<searched> handy structure definitions */</font></a>
<a name="123">const <font color="red">char</font> StdlibDefs[] = "\</a>
<a name="124"><font color="brown">typedef</font> <font color="brown">struct</font> { \</a>
<a name="125">    <font color="red">int</font> quot, rem; \</a>
<a name="126">} div_t; \</a>
<a name="127">\</a>
<a name="128"><font color="brown">typedef</font> <font color="brown">struct</font> { \</a>
<a name="129">    <font color="red">int</font> quot, rem; \</a>
<a name="130">} ldiv_t; \</a>
<a name="131">";</a>
<a name="132">#endif</a>
<a name="133"></a>
<a name="134"><font color="gray">/*<searched> all stdlib.h functions */</font></a>
<a name="135"><font color="brown">struct</font> LibraryFunction <a href="interpreter_h.html#632">StdlibFunctions</a>[] =</a>
<a name="136">{</a>
<a name="137">#ifndef NO_FP</a>
<a name="138">    { <a href="stdlib_c.html#9">StdlibAtof</a>,           "<font color="red">float</font> atof(<font color="red">char</font> *);" },</a>
<a name="139">    { <a href="stdlib_c.html#26">StdlibStrtod</a>,         "<font color="red">float</font> strtod(<font color="red">char</font> *,<font color="red">char</font> **);" },</a>
<a name="140">#endif</a>
<a name="141">    { <a href="stdlib_c.html#15">StdlibAtoi</a>,           "<font color="red">int</font> atoi(<font color="red">char</font> *);" },</a>
<a name="142">    { <a href="stdlib_c.html#20">StdlibAtol</a>,           "<font color="red">int</font> atol(<font color="red">char</font> *);" },</a>
<a name="143">    { <a href="stdlib_c.html#32">StdlibStrtol</a>,         "<font color="red">int</font> strtol(<font color="red">char</font> *,<font color="red">char</font> **,<font color="red">int</font>);" },</a>
<a name="144">    { <a href="stdlib_c.html#37">StdlibStrtoul</a>,        "<font color="red">int</font> strtoul(<font color="red">char</font> *,<font color="red">char</font> **,<font color="red">int</font>);" },</a>
<a name="145">    { <a href="stdlib_c.html#42">StdlibMalloc</a>,         "<font color="red">void</font> *malloc(<font color="red">int</font>);" },</a>
<a name="146">    { <a href="stdlib_c.html#47">StdlibCalloc</a>,         "<font color="red">void</font> *calloc(<font color="red">int</font>,<font color="red">int</font>);" },</a>
<a name="147">    { <a href="stdlib_c.html#52">StdlibRealloc</a>,        "<font color="red">void</font> *realloc(<font color="red">void</font> *,<font color="red">int</font>);" },</a>
<a name="148">    { <a href="stdlib_c.html#57">StdlibFree</a>,           "<font color="red">void</font> free(<font color="red">void</font> *);" },</a>
<a name="149">    { <a href="stdlib_c.html#62">StdlibRand</a>,           "<font color="red">int</font> rand();" },</a>
<a name="150">    { <a href="stdlib_c.html#67">StdlibSrand</a>,          "<font color="red">void</font> srand(<font color="red">int</font>);" },</a>
<a name="151">    { <a href="stdlib_c.html#72">StdlibAbort</a>,          "<font color="red">void</font> abort();" },</a>
<a name="152">    { <a href="stdlib_c.html#77">StdlibExit</a>,           "<font color="red">void</font> exit(<font color="red">int</font>);" },</a>
<a name="153">    { <a href="stdlib_c.html#82">StdlibGetenv</a>,         "<font color="red">char</font> *getenv(<font color="red">char</font> *);" },</a>
<a name="154">    { <a href="stdlib_c.html#87">StdlibSystem</a>,         "<font color="red">int</font> system(<font color="red">char</font> *);" },</a>
<a name="155"><font color="gray">/*<searched>    { StdlibBsearch,        "void *bsearch(void *,void *,int,int,int (*)());" }, */</font></a>
<a name="156"><font color="gray">/*<searched>    { StdlibQsort,          "void *qsort(void *,int,int,int (*)());" }, */</font></a>
<a name="157">    { <a href="stdlib_c.html#99">StdlibAbs</a>,            "<font color="red">int</font> abs(<font color="red">int</font>);" },</a>
<a name="158">    { <a href="stdlib_c.html#104">StdlibLabs</a>,           "<font color="red">int</font> labs(<font color="red">int</font>);" },</a>
<a name="159">#<font color="green">if</font> 0</a>
<a name="160">    { StdlibDiv,            "div_t div(<font color="red">int</font>);" },</a>
<a name="161">    { StdlibLdiv,           "ldiv_t ldiv(<font color="red">int</font>);" },</a>
<a name="162">#endif</a>
<a name="163">    { NULL,                 NULL }</a>
<a name="164">};</a>
<a name="165"></a>
<a name="166"><font color="gray">/*<searched> creates various system-dependent definitions */</font></a>
<a name="167"><font color="red">void</font> <a href="stdlib_c.html#167">StdlibSetupFunc</a>(Picoc *<a name="searched">pc</a>)</a>
<a name="168">{</a>
<a name="169">    <font color="gray">/*<searched> define NULL, TRUE and FALSE */</font></a>
<a name="170">    <font color="green">if</font> (!<a href="variable_c.html#346">VariableDefined</a>(pc, <a href="table_c.html#166">TableStrRegister</a>(pc, "NULL")))</a>
<a name="171">        <a href="variable_c.html#375">VariableDefinePlatformVar</a>(pc, NULL, "NULL", &<a href="stdlib_c.html#167">pc</a>-&gtIntType, (union AnyValue *)&<a href="stdlib_c.html#6">Stdlib_ZeroValue</a>, FALSE);</a>
<a name="172">}</a>
<a name="173"></a>
<a name="174">#endif <font color="gray">/*<searched> !BUILTIN_MINI_STDLIB */</font></a>
</pre></body></html>