<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head>
<body><pre><a name="1"><font color="gray">/*<searched> string.h library for large systems - small embedded systems use clibrary.c instead */</font></a>
<a name="2">#include &lttime.h&gt</a>
<a name="3">#include "../interpreter.h"</a>
<a name="4"></a>
<a name="5">#ifndef BUILTIN_MINI_STDLIB</a>
<a name="6"></a>
<a name="7">static <font color="red">int</font> <a href="time_c.html#7">CLOCKS_PER_SECValue</a> = CLOCKS_PER_SEC;</a>
<a name="8"></a>
<a name="9">#ifdef CLK_PER_SEC</a>
<a name="10">static <font color="red">int</font> CLK_PER_SECValue = CLK_PER_SEC;</a>
<a name="11">#endif</a>
<a name="12"></a>
<a name="13">#ifdef CLK_TCK</a>
<a name="14">static <font color="red">int</font> CLK_TCKValue = CLK_TCK;</a>
<a name="15">#endif</a>
<a name="16"></a>
<a name="17"><font color="red">void</font> <a href="time_c.html#17">StdAsctime</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="18">{</a>
<a name="19">    <a href="time_c.html#17">ReturnValue</a>-&gtVal-&gtPointer = asctime(Param[0]-&gtVal-&gtPointer);</a>
<a name="20">}</a>
<a name="21"></a>
<a name="22"><font color="red">void</font> <a href="time_c.html#22">StdClock</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="23">{</a>
<a name="24">    <a href="time_c.html#22">ReturnValue</a>-&gtVal-&gtInteger = clock();</a>
<a name="25">}</a>
<a name="26"></a>
<a name="27"><font color="red">void</font> <a href="time_c.html#27">StdCtime</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="28">{</a>
<a name="29">    <a href="time_c.html#27">ReturnValue</a>-&gtVal-&gtPointer = ctime(Param[0]-&gtVal-&gtPointer);</a>
<a name="30">}</a>
<a name="31"></a>
<a name="32">#ifndef NO_FP</a>
<a name="33"><font color="red">void</font> <a href="time_c.html#33">StdDifftime</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="34">{</a>
<a name="35">    <a href="time_c.html#33">ReturnValue</a>-&gtVal-&gtFP = difftime((time_t)Param[0]-&gtVal-&gtInteger, <a href="time_c.html#33">Param</a>[1]-&gtVal-&gtInteger);</a>
<a name="36">}</a>
<a name="37">#endif</a>
<a name="38"></a>
<a name="39"><font color="red">void</font> <a href="time_c.html#39">StdGmtime</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="40">{</a>
<a name="41">    <a href="time_c.html#39">ReturnValue</a>-&gtVal-&gtPointer = gmtime(Param[0]-&gtVal-&gtPointer);</a>
<a name="42">}</a>
<a name="43"></a>
<a name="44"><font color="red">void</font> <a href="time_c.html#44">StdLocaltime</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="45">{</a>
<a name="46">    <a href="time_c.html#44">ReturnValue</a>-&gtVal-&gtPointer = localtime(Param[0]-&gtVal-&gtPointer);</a>
<a name="47">}</a>
<a name="48"></a>
<a name="49"><font color="red">void</font> <a href="time_c.html#49">StdMktime</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="50">{</a>
<a name="51">    <a href="time_c.html#49">ReturnValue</a>-&gtVal-&gtInteger = (<font color="red">int</font>)mktime(Param[0]-&gtVal-&gtPointer);</a>
<a name="52">}</a>
<a name="53"></a>
<a name="54"><font color="red">void</font> <a href="time_c.html#54">StdTime</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="55">{</a>
<a name="56">    <a href="time_c.html#54">ReturnValue</a>-&gtVal-&gtInteger = (<font color="red">int</font>)time(Param[0]-&gtVal-&gtPointer);</a>
<a name="57">}</a>
<a name="58"></a>
<a name="59"><font color="red">void</font> <a href="time_c.html#59">StdStrftime</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="60">{</a>
<a name="61">    <a href="time_c.html#59">ReturnValue</a>-&gtVal-&gtInteger = strftime(Param[0]-&gtVal-&gtPointer, <a href="time_c.html#59">Param</a>[1]-&gtVal-&gtInteger, <a href="time_c.html#59">Param</a>[2]-&gtVal-&gtPointer, <a href="time_c.html#59">Param</a>[3]-&gtVal-&gtPointer);</a>
<a name="62">}</a>
<a name="63"></a>
<a name="64">#ifndef WIN32</a>
<a name="65"><font color="red">void</font> <a href="time_c.html#65">StdStrptime</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="66">{</a>
<a name="67">	  extern <font color="red">char</font> *<a name="searched">strptime</a>(const <font color="red">char</font> *s, const <font color="red">char</font> *format, <font color="brown">struct</font> tm *tm);</a>
<a name="68">	  </a>
<a name="69">    <a href="time_c.html#65">ReturnValue</a>-&gtVal-&gtPointer = <a href="time_c.html#67">strptime</a>(Param[0]-&gtVal-&gtPointer, <a href="time_c.html#65">Param</a>[1]-&gtVal-&gtPointer, <a href="time_c.html#65">Param</a>[2]-&gtVal-&gtPointer);</a>
<a name="70">}</a>
<a name="71"></a>
<a name="72"><font color="red">void</font> <a href="time_c.html#72">StdGmtime_r</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="73">{</a>
<a name="74">    <a href="time_c.html#72">ReturnValue</a>-&gtVal-&gtPointer = gmtime_r(Param[0]-&gtVal-&gtPointer, <a href="time_c.html#72">Param</a>[1]-&gtVal-&gtPointer);</a>
<a name="75">}</a>
<a name="76"></a>
<a name="77"><font color="red">void</font> <a href="time_c.html#77">StdTimegm</a>(<font color="brown">struct</font> ParseState *<a name="searched">Parser</a>, <font color="brown">struct</font> Value *<a name="searched">ReturnValue</a>, <font color="brown">struct</font> Value **<a name="searched">Param</a>, <font color="red">int</font> <a name="searched">NumArgs</a>)</a>
<a name="78">{</a>
<a name="79">    <a href="time_c.html#77">ReturnValue</a>-&gtVal-&gtInteger = timegm(Param[0]-&gtVal-&gtPointer);</a>
<a name="80">}</a>
<a name="81">#endif</a>
<a name="82"></a>
<a name="83"><font color="gray">/*<searched> handy structure definitions */</font></a>
<a name="84">const <font color="red">char</font> <a href="interpreter_h.html#636">StdTimeDefs</a>[] = "\</a>
<a name="85"><font color="brown">typedef</font> <font color="red">int</font> time_t; \</a>
<a name="86"><font color="brown">typedef</font> <font color="red">int</font> clock_t;\</a>
<a name="87">";</a>
<a name="88"></a>
<a name="89"><font color="gray">/*<searched> all string.h functions */</font></a>
<a name="90"><font color="brown">struct</font> LibraryFunction <a href="interpreter_h.html#637">StdTimeFunctions</a>[] =</a>
<a name="91">{</a>
<a name="92">    { <a href="time_c.html#17">StdAsctime</a>,       "<font color="red">char</font> *asctime(<font color="brown">struct</font> tm *);" },</a>
<a name="93">    { <a href="time_c.html#22">StdClock</a>,         "time_t clock();" },</a>
<a name="94">    { <a href="time_c.html#27">StdCtime</a>,         "<font color="red">char</font> *ctime(<font color="red">int</font> *);" },</a>
<a name="95">#ifndef NO_FP</a>
<a name="96">    { <a href="time_c.html#33">StdDifftime</a>,      "<font color="red">double</font> difftime(<font color="red">int</font>, <font color="red">int</font>);" },</a>
<a name="97">#endif</a>
<a name="98">    { <a href="time_c.html#39">StdGmtime</a>,        "<font color="brown">struct</font> tm *gmtime(<font color="red">int</font> *);" },</a>
<a name="99">    { <a href="time_c.html#44">StdLocaltime</a>,     "<font color="brown">struct</font> tm *localtime(<font color="red">int</font> *);" },</a>
<a name="100">    { <a href="time_c.html#49">StdMktime</a>,        "<font color="red">int</font> mktime(<font color="brown">struct</font> tm *ptm);" },</a>
<a name="101">    { <a href="time_c.html#54">StdTime</a>,          "<font color="red">int</font> time(<font color="red">int</font> *);" },</a>
<a name="102">    { <a href="time_c.html#59">StdStrftime</a>,      "<font color="red">int</font> strftime(<font color="red">char</font> *, <font color="red">int</font>, <font color="red">char</font> *, <font color="brown">struct</font> tm *);" },</a>
<a name="103">#ifndef WIN32</a>
<a name="104">    { <a href="time_c.html#65">StdStrptime</a>,      "<font color="red">char</font> *strptime(<font color="red">char</font> *, <font color="red">char</font> *, <font color="brown">struct</font> tm *);" },</a>
<a name="105">	{ <a href="time_c.html#72">StdGmtime_r</a>,      "<font color="brown">struct</font> tm *gmtime_r(<font color="red">int</font> *, <font color="brown">struct</font> tm *);" },</a>
<a name="106">    { <a href="time_c.html#77">StdTimegm</a>,        "<font color="red">int</font> timegm(<font color="brown">struct</font> tm *);" },</a>
<a name="107">#endif</a>
<a name="108">    { NULL,             NULL }</a>
<a name="109">};</a>
<a name="110"></a>
<a name="111"></a>
<a name="112"><font color="gray">/*<searched> creates various system-dependent definitions */</font></a>
<a name="113"><font color="red">void</font> <a href="time_c.html#113">StdTimeSetupFunc</a>(Picoc *<a name="searched">pc</a>)</a>
<a name="114">{</a>
<a name="115">    <font color="gray">/*<searched> make a "struct tm" which is the same size as a native tm structure */</font></a>
<a name="116">    <a href="type_c.html#272">TypeCreateOpaqueStruct</a>(pc, NULL, <a href="table_c.html#166">TableStrRegister</a>(pc, "tm"), sizeof(<font color="brown">struct</font> tm));</a>
<a name="117">    </a>
<a name="118">    <font color="gray">/*<searched> define CLK_PER_SEC etc. */</font></a>
<a name="119">    <a href="variable_c.html#375">VariableDefinePlatformVar</a>(pc, NULL, "CLOCKS_PER_SEC", &<a href="time_c.html#113">pc</a>-&gtIntType, (union AnyValue *)&<a href="time_c.html#7">CLOCKS_PER_SECValue</a>, FALSE);</a>
<a name="120">#ifdef CLK_PER_SEC</a>
<a name="121">    <a href="variable_c.html#375">VariableDefinePlatformVar</a>(pc, NULL, "CLK_PER_SEC", &<a href="time_c.html#113">pc</a>-&gtIntType, (union AnyValue *)&CLK_PER_SECValue, FALSE);</a>
<a name="122">#endif</a>
<a name="123">#ifdef CLK_TCK</a>
<a name="124">    <a href="variable_c.html#375">VariableDefinePlatformVar</a>(pc, NULL, "CLK_TCK", &<a href="time_c.html#113">pc</a>-&gtIntType, (union AnyValue *)&CLK_TCKValue, FALSE);</a>
<a name="125">#endif</a>
<a name="126">}</a>
<a name="127"></a>
<a name="128">#endif <font color="gray">/*<searched> !BUILTIN_MINI_STDLIB */</font></a>
</pre></body></html>